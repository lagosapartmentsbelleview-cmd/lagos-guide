<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Gestão de Preços – Concorrência</title>

    <!-- CSS global + preços -->
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/precos.css">
</head>

<body>

    <!-- MENU SUPERIOR -->
    <div class="top-menu">
        <span class="menu-button" id="toggleMenu">☰ Menu</span>

        <div class="dropdown-menu" id="dropdown-menu">
            <a href="listagem-reservas.html">Reservas</a>
            <a href="calendario.html">Calendario</a>
            <a href="limpeza.html">Limpeza</a>
            <a href="financeiro.html">Financeiro</a>
            <a href="resultados.html">Resultados</a>
            <a href="login.html" class="sair">Sair</a>
        </div>
    </div>

    <!-- CONTEÚDO -->
    <div class="content">

        <h1>Importar Preços da Concorrência</h1>

       <!-- NOVO: CONFIGURAÇÃO DE DESCONTOS E FILTROS -->
<section class="config-section">
    <h2>Configuração de Descontos e Filtros</h2>

    <div class="filtros-linha">
        <div>
            <label for="selAno">Ano:</label>
            <select id="selAno"></select>
        </div>

        <div>
            <label for="selMes">Mês:</label>
            <select id="selMes">
                <option value="0">Janeiro</option>
                <option value="1">Fevereiro</option>
                <option value="2">Março</option>
                <option value="3">Abril</option>
                <option value="4">Maio</option>
                <option value="5">Junho</option>
                <option value="6">Julho</option>
                <option value="7">Agosto</option>
                <option value="8">Setembro</option>
                <option value="9">Outubro</option>
                <option value="10">Novembro</option>
                <option value="11">Dezembro</option>
            </select>
        </div>

        <div>
            <label for="inpMargem">Margem abaixo Vitasol (€):</label>
            <input type="number" id="inpMargem" value="1" step="0.5" min="0">
        </div>
    </div>

    <div id="painelDescontos">
        <h3>Descontos Booking</h3>

        <div class="linha-desconto">
            <label for="selGenius">Genius:</label>
            <select id="selGenius">
                <option value="0">Sem Genius</option>
                <option value="0.10">Genius 10%</option>
                <option value="0.15">Genius 15%</option>
                <option value="0.20">Genius 20%</option>
            </select>
        </div>

        <div class="linha-desconto">
            <label>
                <input type="checkbox" id="chkTelemovel">
                Tarifa Telemóvel (10%)
            </label>
        </div>

        <div class="linha-desconto">
            <label for="inpPais">Tarifa por País (%):</label>
            <input type="number" id="inpPais" value="10" min="0" max="100">
        </div>

        <div class="linha-desconto">
            <label for="inpCampanha">
            Campanha Promo (%)
            <span class="tooltip" data-tip="Acumula com: Genius, Portefólio. Não acumula com: Telemóvel, País, Ofertas Especiais.">ℹ️</span>
            </label>
            <input type="number" id="inpCampanha" min="0" max="100">
        </div>


        <div class="linha-desconto">
            <label for="inpOfertaBasica">Oferta Básica (%):</label>
            <input type="number" id="inpOfertaBasica" value="10">
        </div>

        <div class="linha-desconto">
            <label for="inpOfertaUltimaHora">Oferta Última Hora (%):</label>
            <input type="number" id="inpOfertaUltimaHora" value="10">
        </div>

        <div class="linha-desconto">
            <label for="inpOfertaAntecipada">Oferta Reserva Antecipada (%):</label>
            <input type="number" id="inpOfertaAntecipada" value="10">
        </div>

        <div class="linha-desconto">
            <label for="inpTempoLimitado">Oferta Tempo Limitado (%):</label>
            <input type="number" id="inpTempoLimitado" value="0">
        </div>
    </div>

    <!-- BOTÕES NOVOS -->
    <div class="linha-botoes-filtros">
        <button id="btnGuardarFiltros">Guardar Filtros</button>
        <button id="btnAplicarFiltros">Aplicar Filtros</button>
    </div>
</section>


        <!-- IMPORTAÇÃO DE DADOS -->
        <section class="import-section">
            <h2>Colar dados (Booking / Vitasol)</h2>

            <textarea id="inputConcorrencia" placeholder="Cole aqui os dados copiados do Booking ou do site da Vitasol..."></textarea>

            <div class="buttons">
                <button id="btnImportar">Importar Dados</button>
                <button id="btnExportar">Exportar Excel</button>
                <button id="btnLimpar" class="btn-limpar">Limpar Dados</button>
            </div>

            <div id="infoAtualizacao">Última atualização: —</div>
        </section>

        <!-- RESULTADOS DA IMPORTAÇÃO -->
        <section class="resultado-section">
            <h2>Dados Importados</h2>

            <table id="tabelaResultados">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Dia da Semana</th>
                        <th>Preço (€)</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- =============================== -->
        <!-- NOVA SECÇÃO: SIMULADOR DE PREÇOS -->
        <!-- =============================== -->

        <section id="simuladorPrecos">
            <h2>Simulador de Preços</h2>
            <p>Selecione o ano e mês acima para gerar a grelha de preços.</p>

            <div id="grelhaDiasContainer">
                <div id="grelhaDias"></div>
            </div>
        </section>

    </div> <!-- fecha .content -->

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

    <!-- Configuração Firebase -->
    <script src="js/firebase-config.js"></script>

    <!-- Menu -->
    <script src="js/menu.js"></script>

    <!-- Código principal -->
    <script src="js/precos.js"></script>

</body>
</html>
